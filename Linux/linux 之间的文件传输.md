# linux 之间的文件传输

## 文件传输命令 `scp`

> Linux scp 命令用于 Linux 之间复制文件和目录。
>
> scp 是 secure copy 的缩写, scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。
>
> scp 是加密的，[rcp](https://www.runoob.com/linux/linux-comm-rcp.html) 是不加密的，scp 是 rcp 的加强版

简易写法:

```shell
scp [可选参数] file_source file_target 
```

**参数说明：**

- -1： 强制scp命令使用协议ssh1
- -2： 强制scp命令使用协议ssh2
- -4： 强制scp命令只使用IPv4寻址
- -6： 强制scp命令只使用IPv6寻址
- -B： 使用批处理模式（传输过程中不询问传输口令或短语）
- -C： 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）
- -p：保留原文件的修改时间，访问时间和访问权限。
- -q： 不显示传输进度条。
- -r： 递归复制整个目录。
- -v：详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。
- -c cipher： 以cipher将数据传输进行加密，这个选项将直接传递给ssh。
- -F ssh_config： 指定一个替代的ssh配置文件，此参数直接传递给ssh。
- -i identity_file： 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。
- -l limit： 限定用户所能使用的带宽，以Kbit/s为单位。
- -o ssh_option： 如果习惯于使用ssh_config(5)中的参数传递方式，
- -P port：注意是大写的P, port是指定数据传输用到的端口号
- -S program： 指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项

## `spawn`命令

### expect 命令

expect的语法-------通过expect可以实现将交互式的命令变为非交互式执行，不需要人为干预(手动输入)

是一个免费的编程工具, 用来实现自动的交互式任务, 而无需人为干预. 说白了 expect 就是一套用来实现自动交互功能的软件

在实际工作中我们运行命令、脚本或程序时, 都需要从终端输入某些继续运行的指令,而这些输 入都需要人为的手工进行. 而利用 expect 则可以根据程序的提示, 模拟标准输入提供给程序, 从而实现自动化交互执行

**用法:**

1. 定义expect脚本执行的shell 

   #!/usr/bin/expect -----类似于#!/bin/bash

2. set timeout 30

   设置超时时间30s

3. spawn

   spawn是执行expect之后后执行的内部命令开启一个会话 #功能:用来执行shell的交互命令

4. expect ---相当于捕捉

   功能:判断输出结果是否包含某项字符串(相当于捕捉返回的结果)，没有则会断开，否则等待一段时间后返回，等待通过timeout设置

5. send

   执行交互动作，将交互要执行的命令进行发送给交互指令，命令字符串结尾要加上“\r”，#---相当于回车

6. interract

   执行完后保持交互状态，需要等待手动退出交互状态，如果不加这一项，交互完成会自动退出

7. exp_continue

   继续执行接下来的操作

   ​		